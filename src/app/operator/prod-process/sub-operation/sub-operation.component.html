<div class="subOperations">
    <div class="topSubOpe">
        <input type="text" name="" #inputQrCode style="position: absolute; top:0;left:-100em"
            (change)="inputAction($event.target)">
        <div class="subOperation-title">
            <h2>{{currentSubOperation.DESCRIPTION_OPERATION}}</h2>
        </div>

        <button mat-raised-button (click)="confEvent()" *ngIf="currentStep.prodStep.DATE_FIN == null">CONF
            <app-qrcode style="width: 2em;" [subOperation]="currentSubOperation" [command]="'1'"></app-qrcode>
        </button>
    </div>

    <div class="content">
        <mat-tab-group #MatTabGroup mat-align-tabs="start" class="tabGroup"
            (selectedIndexChange)="activeStepEvent($event)">
            <mat-tab label="" *ngFor="let step of currentSubOperation.STEPS"
                [aria-label]="{'background-color': step.prodStep ? step.prodStep.STATUS=='1'?'green':'red':''}">
                <ng-template mat-tab-label>
                    <div class="img-contener" [ngSwitch]="step.TRACA.TYPE_TRACA" *ngIf="step.TRACA"
                        [ngStyle]="{
                            'background-color': step.TRACA.PROD_TRACA_DETAILS?step.TRACA.PROD_TRACA_DETAILS.SANCTION=='1'?'rgb(102, 255, 153)':'red':''}">
                        <img src="assets/img/shield.svg" alt="" *ngSwitchCase="1">
                        <img src="assets/img/flask.svg" alt="" *ngSwitchCase="2">
                        <img src="assets/img/build.svg" alt="" *ngSwitchCase="3">
                    </div>
                    <div class="divTxt"
                        [ngStyle]="{'color': step.prodStep.DATE_FIN ? 'rgb(102, 255, 153)' : 'inherit'}">STEP :
                        {{step.ORDRE}}</div>

                </ng-template>
                <div class="step-contener">
                    <app-instruction class="subOperation-instruction" [instruction]="step.INSTRUCTION">
                    </app-instruction>
                    <app-traca class="subOperation-traca" [tracaInput]="inputMat" [subOperation]="subOperation"
                        [tracaList]="step.TRACA" *ngIf="step.TRACA" [prodTracaStep]="prodTracaStep"
                        [processTracaStep]="processTracaStep"></app-traca>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>